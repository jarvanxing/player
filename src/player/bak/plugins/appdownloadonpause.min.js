(function(a,c){var b={pluginName:"AppDownloadOnPause",text:"查看公众号更多视频",posterTpl:'<div class="x_overlay_poster"><img class="x_poster_img" /></div>',bigPlayTpl:'<div style="z-index:10" class="x_overlay_play"><span class="x_button_play"></span></div>',bannerTpl:['<div data-role="box" class="x_app_download" style="display:none">','   <a data-role="a" class="x_download_app" href="${url}" ${iframe}>','		<i class="x_icon_logo"></i>','		<span class="x_download_app_wording"><span class="x_download_app_title">${text1}</span><span class="x_download_app_desc">${text}</span></span>','		<span class="x_app_btn_em">${btnText}</span>',"	</a>","</div>"].join("")};
c.extend(c,{createAppDownloadOnPause:function(F){var x=F.t,G=x.$UILayer||x.$videomod,n=x.$video,d=n[0],j=null,H=window!=top?document.referrer:document.location.href,i=x.config.libpath+x.config.pluginUrl.AppBanner,q=c.os.hasTouch?"tap":"click",B="x_appbanner_"+x.playerid,u=null,h=null,D=0,E=null,g=x.curVideo.getVid(),f="http://shp.qpic.cn/qqvideo_ori/0/"+g+"_496_280/0",m=null,v=F.pausetime?parseInt(F.pausetime):30,l="";
if(c.browser.WeChat){F.downloadUrl="http://mcgi.v.qq.com/commdatav2?cmd=4&confid=231&platform=aphone";}function C(){k();o();z(function(){y();});}function k(){if(!x.$UILayer){G.addClass("x_container");
j=G.find(".x_shadow");if(!j.length){j=c('<div class="x_shadow"></div>').appendTo(G);j.hide();}if(!a.common.isSupportSVG()){x.$mod.addClass("x_no_svg");
}}u=c('<div style="-webkit-transition-duration:500ms;transition-duration:500ms;position:absolute;bottom:-55px;width:100%;height:55px;z-index:10;" id="'+B+'"></div>').appendTo(G);
u.hide();m=c(b.posterTpl).appendTo(G);m.find("img").attr("src",f);m.hide();}function o(){h=c(b.bigPlayTpl).appendTo(G);h.hide();h.on(q,function(){setTimeout(function(){d.play();
},400);});}function p(){n.on("pause paused",function(J){if(!!x.isTouching){return;}var I=parseInt(x.getDuration());var t=parseInt(c.os.iphone?D:d.currentTime);
if(t>(v-1)&&(I-t)>5){r(1);return;}});n.on("timeupdate",function(){if(d.currentTime){D=d.currentTime;}});n.on("play playing",function(){r(0);});}function e(){d.style.position="absolute";
d.style.top="-200%";if(c.browser.MQQ){d.height=1;}}function s(){d.style.position="static";d.style.top="0";if(c.browser.MQQ){d.height=G.height();}}function r(t){if(t){clearTimeout(E);
E=setTimeout(function(){if(!x.$UILayer){G.addClass("x_finished x_onpause");j.show();}h.show();e();m.show();u.show().css({transform:"translateY(-55px)","-webkit-transform":"translateY(-55px)"});
a.report(l);},300);}else{clearTimeout(E);E=setTimeout(function(){s();u.css({transform:"translateY(0)","-webkit-transform":"translateY(0)"});setTimeout(function(){u.hide();
},500);if(!x.$UILayer){G.removeClass("x_finished x_onpause");setTimeout(function(){j.hide();},500);}h.hide();m.hide();},300);}}function z(t){c.loadPluginCss(b.pluginName).done(t);
}function w(){var t=c.Deferred();if(c.createAppBanner){t.resolve();}else{c.getScript(i,function(){t.resolve();});}return t;}function A(t){c.ajax({url:"http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex?auto_id=1026&otype=json",dataType:"jsonp"}).done(function(I){if(I&&I.time){v=parseInt(I.time);
}t();}).fail(function(){t();});}function y(){w().done(function(){c.createAppBanner({text:F.text,defaultText:b.text,style:"none",isAutoReport:false,vid:g,downloadUrl:F.downloadUrl,reportParams:{int2:2},tpl:b.bannerTpl,modId:B}).done(function(t){l=t;
l.int2=2;A(p);});});}C();}});})(x,x.$);(function(a,b){b.extend(a.Player.fn,{buildAppDownloadOnPause:function(c){!c?c={}:"";c.t=this;b.createAppDownloadOnPause(c);
}});})(x,x.$);